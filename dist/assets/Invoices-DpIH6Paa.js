import{r as n,j as s}from"./index-DYjkxkRa.js";import{F as j}from"./file-text-Cejw2rtJ.js";import{C}from"./check-CfhuOiZV.js";import{X as N}from"./x-D1T7jfee.js";import{D as I}from"./dollar-sign-4mQ7fe36.js";import{S as y}from"./search-DneDA0BG.js";import{c as D}from"./createLucideIcon-b_PnP7i0.js";import{C as L}from"./calendar-CZKMEmBV.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],w=D("funnel",S),B=()=>{const[i,p]=n.useState([]),[f,m]=n.useState(!0),[t,l]=n.useState("all"),[c,h]=n.useState("");n.useEffect(()=>{g()},[]);const g=async()=>{m(!0);try{const a=await(await fetch("/api/invoices/all?page=1&limit=1000")).json();a.success?p(a.invoices||[]):console.error("Error loading invoices:",a.error)}catch(e){console.error("Error loading invoices:",e)}finally{m(!1)}},v=e=>`$${(e/100).toLocaleString()} COP`,b=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),x=e=>({PAID:"#00C292",UNPAID:"#EF4444",PENDING:"#FB9678",CANCELLED:"#6B7280"})[e]||"#6B7280",o=i.filter(e=>{var a,u;if(t!=="all"&&e.status.toLowerCase()!==t.toLowerCase())return!1;if(c){const d=c.toLowerCase();return e.invoiceId.toLowerCase().includes(d)||e.deviceId.toLowerCase().includes(d)||((a=e.contractId)==null?void 0:a.toLowerCase().includes(d))||((u=e.paymentReference)==null?void 0:u.toLowerCase().includes(d))}return!0}),r={total:i.length,paid:i.filter(e=>e.status==="PAID").length,unpaid:i.filter(e=>e.status==="UNPAID").length,totalAmount:i.reduce((e,a)=>e+a.amount,0)};return s.jsxs("div",{className:"invoices-page",children:[s.jsx("div",{className:"page-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:"ðŸ’° Invoices"}),s.jsx("p",{children:"View and manage all invoices across devices"})]})}),s.jsxs("div",{className:"invoices-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#03C9D7"},children:s.jsx(j,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total Invoices"}),s.jsx("div",{className:"stat-number",children:r.total})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#00C292"},children:s.jsx(C,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Paid"}),s.jsx("div",{className:"stat-number",children:r.paid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#EF4444"},children:s.jsx(N,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Unpaid"}),s.jsx("div",{className:"stat-number",children:r.unpaid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#7460EE"},children:s.jsx(I,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total Amount"}),s.jsx("div",{className:"stat-number",children:v(r.totalAmount)})]})]})]}),s.jsx("div",{className:"invoices-search",children:s.jsxs("div",{className:"search-box",children:[s.jsx(y,{className:"search-icon"}),s.jsx("input",{type:"text",placeholder:"Search by invoice ID, device ID, contract ID, or payment reference...",value:c,onChange:e=>h(e.target.value)}),c&&s.jsx("button",{className:"clear-search",onClick:()=>h(""),children:s.jsx(N,{})})]})}),s.jsxs("div",{className:"invoices-filters",children:[s.jsxs("button",{className:`filter-btn ${t==="all"?"active":""}`,onClick:()=>l("all"),children:[s.jsx(w,{})," All"]}),s.jsx("button",{className:`filter-btn ${t==="paid"?"active":""}`,onClick:()=>l("paid"),children:"Paid"}),s.jsx("button",{className:`filter-btn ${t==="unpaid"?"active":""}`,onClick:()=>l("unpaid"),children:"Unpaid"}),s.jsx("button",{className:`filter-btn ${t==="pending"?"active":""}`,onClick:()=>l("pending"),children:"Pending"})]}),f?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"Loading invoices..."})]}):o.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(j,{size:48}),s.jsx("h3",{children:"No Invoices Found"}),s.jsx("p",{children:c?`No invoices match "${c}"`:t==="all"?"No invoices have been created yet":`No ${t} invoices`})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"invoices-table",children:[s.jsxs("div",{className:"table-header",children:[s.jsx("div",{children:"Invoice ID"}),s.jsx("div",{children:"Contract ID"}),s.jsx("div",{children:"Device"}),s.jsx("div",{children:"Date"}),s.jsx("div",{children:"Amount"}),s.jsx("div",{children:"Status"})]}),o.map(e=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"invoice-id",children:e.invoiceId}),s.jsx("div",{className:"contract-id",children:e.contractId||"-"}),s.jsx("div",{className:"device-id",children:e.deviceId}),s.jsxs("div",{className:"invoice-date",children:[s.jsx(L,{size:14}),b(e.date)]}),s.jsx("div",{className:"invoice-amount",children:v(e.amount)}),s.jsx("div",{className:"invoice-status",children:s.jsx("span",{className:"status-badge",style:{background:`${x(e.status)}20`,color:x(e.status)},children:e.status})})]},e.invoiceId))]}),s.jsxs("div",{className:"results-info",children:["Showing ",o.length," of ",i.length," invoices"]})]})]})};export{B as default};
