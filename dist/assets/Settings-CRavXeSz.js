import{r,j as e,l as Se,F as ke,s as Fe}from"./main-DVAXFARq.js";import{u as ze}from"./useTranslation-LM3aqFs0.js";import{c as C}from"./createLucideIcon-Cp5FBxft.js";import{S as Le}from"./settings-DHPJ9gep.js";import{R as le}from"./refresh-cw-CAC9H1ZS.js";import{C as ce}from"./clock-D_nI2vjn.js";import{D as Ee}from"./dollar-sign-B5DZ-WZI.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],E=C("database",Te);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],T=C("image",Ie);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Re=C("pen",Pe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],j=C("save",Me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Oe=C("zoom-in",_e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Be=C("zoom-out",$e),Ve=()=>{var W,Z,H,V,G,q,J,Q,ee,se,te,ie,ae,ne;const{t}=ze(),[a,I]=r.useState({currency:"COP",timezone:"America/Bogota",contractDefaults:{dailyRate:3e4,contractDays:500,freeDaysLimit:4,initialFee:0,emailDomain:"tumotoya.online"},displayName:"PocketBike",companyLogo:"/pocketbike_60x60.jpg",automaticCutOff:!1,cutOffStrategy:1,gpsService:"megarastreo",gpsConfig:{host:"",port:"",user:"",password:"",token:""},wompiConfig:{publicKey:"",privateKey:"",integritySecret:"",eventsSecret:""}}),[M,D]=r.useState(!1),[o,_]=r.useState({}),[d,O]=r.useState({}),[P,$]=r.useState(!1),[re,B]=r.useState(null),[u,b]=r.useState(1),[x,S]=r.useState({x:0,y:0}),[U,w]=r.useState(!1),[k,A]=r.useState({x:0,y:0}),[f,R]=r.useState({loading:!1,result:null,error:null}),[p,F]=r.useState("branding"),oe=async()=>{R({loading:!0,result:null,error:null});try{const s=await Fe();R({loading:!1,result:s,error:null})}catch(s){R({loading:!1,result:null,error:s.message||"Sync failed"})}},N=r.useRef(null),z=r.useRef(null),v=(s,i)=>{I(n=>({...n,[s]:i})),D(!1)};r.useEffect(()=>{(async()=>{try{const i=await Se();i.success&&I(n=>({...n,...i.data,contractDefaults:{...n.contractDefaults,...i.data.contractDefaults||{}},companyLogo:i.data.logo||n.companyLogo}))}catch(i){console.error("Error fetching settings:",i)}})()},[]),r.useEffect(()=>{P&&N.current&&z.current&&de()},[P,re,u,x]);const de=()=>{const s=N.current,i=s.getContext("2d"),n=z.current;if(!n||!n.complete)return;i.clearRect(0,0,s.width,s.height),i.save(),i.translate(s.width/2+x.x,s.height/2+x.y),i.drawImage(n,-n.width*u/2,-n.height*u/2,n.width*u,n.height*u),i.restore();const c=s.width/2,g=s.height/2,h=Math.min(s.width,s.height)*.8,m=h/2;i.fillStyle="rgba(0, 0, 0, 0.6)",i.fillRect(0,0,s.width,s.height),i.clearRect(c-m,g-m,h,h),i.save(),i.beginPath(),i.rect(c-m,g-m,h,h),i.clip(),i.translate(s.width/2+x.x,s.height/2+x.y),i.drawImage(n,-n.width*u/2,-n.height*u/2,n.width*u,n.height*u),i.restore(),i.strokeStyle="#3b82f6",i.lineWidth=3,i.strokeRect(c-m,g-m,h,h)},ge=s=>{w(!0),A({x:s.clientX-x.x,y:s.clientY-x.y})},me=s=>{U&&S({x:s.clientX-k.x,y:s.clientY-k.y})},K=()=>{w(!1)},he=s=>{const i=s.touches[0];w(!0),A({x:i.clientX-x.x,y:i.clientY-x.y})},ue=s=>{if(!U)return;s.preventDefault();const i=s.touches[0];S({x:i.clientX-k.x,y:i.clientY-k.y})},pe=()=>{w(!1)},xe=async()=>{await y("all")},y=async s=>{_(i=>({...i,[s]:!0}));try{const i=localStorage.getItem("token")||localStorage.getItem("auth_token");let n={};s==="all"?n={...a,logo:a.companyLogo}:s==="branding"?n={displayName:a.displayName,logo:a.companyLogo}:s==="gps"?n={gpsService:a.gpsService,gpsConfig:a.gpsConfig}:s==="wompi"?n={wompiConfig:a.wompiConfig}:s==="cutoff"?n={automaticCutOff:a.automaticCutOff,cutOffStrategy:a.cutOffStrategy}:s==="curfew"?n={curfew:a.curfew}:s==="general"&&(n={currency:a.currency,timezone:a.timezone,contractDefaults:a.contractDefaults});const c=await ke(n);c.success?(console.log(`${s} settings saved successfully`),O(g=>({...g,[s]:!0})),setTimeout(()=>{O(g=>({...g,[s]:!1}))},3e3),(s==="all"||s==="branding")&&(localStorage.setItem("companyLogo",a.companyLogo),localStorage.setItem("displayName",a.displayName)),s==="all"&&(D(!0),setTimeout(()=>D(!1),3e3))):alert(`Error saving ${s} settings: `+c.error)}catch(i){console.error(`Error saving ${s} settings:`,i),alert(`Error saving ${s} settings`)}finally{_(i=>({...i,[s]:!1}))}},fe=s=>{const i=s.target.files[0];if(i){if(!i.type.startsWith("image/")){alert("Please upload an image file");return}if(i.size>2*1024*1024){alert("Image size should be less than 2MB");return}const n=new FileReader;n.onloadend=()=>{const c=new Image;c.onload=()=>{if(z.current=c,N.current){const g=N.current,h=g.width/c.width,m=g.height/c.height,L=Math.max(h,m)*.8;b(L),S({x:0,y:0})}B(n.result),$(!0)},c.src=n.result},n.readAsDataURL(i),s.target.value=""}},ve=()=>{const s=N.current,i=z.current;if(!s||!i)return;const n=document.createElement("canvas");n.width=300,n.height=300;const c=n.getContext("2d"),g=s.width/2,h=s.height/2,m=Math.min(s.width,s.height)*.8,L=m/2,Ce=g-L,we=h-L;c.drawImage(s,Ce+2,we+2,m-4,m-4,0,0,300,300);const De=n.toDataURL("image/png");v("companyLogo",De),Y()},Y=()=>{$(!1),B(null),b(1),S({x:0,y:0}),w(!1)},ye=s=>{b(parseFloat(s.target.value))},je=()=>{b(s=>Math.min(s+.05,3))},be=()=>{b(s=>Math.max(s-.1,.5))},Ne=s=>{const i=s.deltaY>0?-.1:.1;b(n=>Math.min(Math.max(n+i,.5),3))},X=s=>`$${s.toLocaleString()} COP`,l=(s,i,n)=>{I(c=>({...c,[s]:{...c[s],[i]:n}})),D(!1)};return e.jsxs("div",{className:"settings-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsxs("h1",{children:["⚙️ ",t("settings.title")]}),e.jsx("p",{children:t("settings.subtitle")})]})}),e.jsxs("div",{className:"settings-container",children:[e.jsxs("div",{className:"settings-tabs",children:[e.jsxs("button",{className:`tab-button ${p==="branding"?"active":""}`,onClick:()=>F("branding"),children:[e.jsx(T,{size:18})," ",t("settings.tabs.branding")]}),e.jsxs("button",{className:`tab-button ${p==="business"?"active":""}`,onClick:()=>F("business"),children:[e.jsx(Le,{size:18})," ",t("settings.tabs.business")]}),e.jsxs("button",{className:`tab-button ${p==="integrations"?"active":""}`,onClick:()=>F("integrations"),children:[e.jsx(E,{size:18})," ",t("settings.tabs.integrations")]}),e.jsxs("button",{className:`tab-button ${p==="system"?"active":""}`,onClick:()=>F("system"),children:[e.jsx(le,{size:18})," ",t("settings.tabs.system")]})]}),p==="branding"&&e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(T,{size:20}),e.jsx("h2",{children:t("settings.branding.title")}),e.jsx("button",{className:`btn-save-section ${d.branding?"btn-saved":""}`,onClick:()=>y("branding"),disabled:o.branding,children:o.branding?t("settings.actions.saving"):d.branding?t("settings.actions.saveSection"):e.jsx(j,{size:16})})]}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[e.jsxs("div",{className:"setting-item",style:{flex:1,marginBottom:0},children:[e.jsxs("label",{htmlFor:"displayName",children:[e.jsx(T,{size:16}),t("settings.branding.displayName")]}),e.jsx("input",{id:"displayName",type:"text",value:a.displayName,onChange:s=>v("displayName",s.target.value),placeholder:"PocketBike",className:"input-display-name"}),e.jsx("p",{className:"setting-description",children:t("settings.branding.displayNameDesc")})]}),e.jsxs("div",{className:"setting-item",style:{flex:1,marginBottom:0},children:[e.jsx("label",{htmlFor:"emailDomain",children:t("settings.branding.emailDomain")}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-prefix",style:{background:"#F9FAFB",border:"1px solid #D1D5DB",borderRight:"none",padding:"0.875rem 1rem",borderRadius:"0.5rem 0 0 0.5rem",color:"#6B7280",fontSize:"1rem",display:"flex",alignItems:"center",height:"100%"},children:"@"}),e.jsx("input",{id:"emailDomain",type:"text",value:((W=a.contractDefaults)==null?void 0:W.emailDomain)||"tumotoya.online",onChange:s=>l("contractDefaults","emailDomain",s.target.value),placeholder:"tumotoya.online",className:"input-display-name",style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:"-1rem"}})]}),e.jsx("p",{className:"setting-description",children:t("settings.branding.emailDomainDesc")})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("label",{htmlFor:"companyLogo",children:[e.jsx(T,{size:16}),t("settings.branding.logo")]}),e.jsxs("div",{className:"branding-upload-area",children:[e.jsxs("div",{className:"current-logo-container",children:[e.jsx("img",{src:a.companyLogo,alt:t("settings.branding.logo"),onError:s=>{s.target.src="/pocketbike_60x60.jpg"}}),e.jsx("button",{type:"button",className:"btn-edit-logo",onClick:()=>document.getElementById("companyLogo").click(),title:t("settings.branding.changeLogo"),children:e.jsx(Re,{size:14})})]}),e.jsx("div",{className:"upload-dropzone",onClick:()=>document.getElementById("companyLogo").click(),children:e.jsx("span",{className:"upload-text",children:t("settings.branding.uploadNew")})}),e.jsx("input",{id:"companyLogo",type:"file",accept:"image/*",onChange:fe,style:{display:"none"}})]}),e.jsx("p",{className:"upload-hint-text",children:t("settings.branding.recommended")})]})]}),p==="business"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) minmax(0, 1fr)",gap:"1.5rem",alignItems:"start"},children:[e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ce,{size:20}),e.jsx("h2",{children:t("settings.cutoff.title")}),e.jsx("button",{className:`btn-save-section ${d.cutoff?"btn-saved":""}`,onClick:()=>y("cutoff"),disabled:o.cutoff,children:o.cutoff?t("settings.actions.saving"):d.cutoff?t("settings.actions.saveSection"):e.jsx(j,{size:16})})]}),e.jsxs("div",{className:"setting-item toggle-item",children:[e.jsx("div",{className:"setting-info",children:e.jsx("label",{htmlFor:"automaticCutOff",children:t("settings.cutoff.enable")})}),e.jsx("input",{id:"automaticCutOff",type:"checkbox",checked:a.automaticCutOff,onChange:s=>v("automaticCutOff",s.target.checked),className:"toggle-checkbox"})]}),a.automaticCutOff&&e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"cutOffStrategy",children:t("settings.cutoff.strategy")}),e.jsxs("select",{id:"cutOffStrategy",value:a.cutOffStrategy,onChange:s=>v("cutOffStrategy",parseInt(s.target.value)),className:"strategy-select",children:[e.jsx("option",{value:1,children:t("settings.cutoff.strategy1")}),e.jsx("option",{value:2,children:t("settings.cutoff.strategy2")}),e.jsx("option",{value:3,children:t("settings.cutoff.strategy3")})]}),e.jsx("p",{className:"setting-description",children:t("settings.cutoff.strategyDesc")})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ce,{size:20}),e.jsx("h2",{children:t("settings.cutoff.curfewTitle")}),e.jsx("button",{className:`btn-save-section ${d.curfew?"btn-saved":""}`,onClick:()=>y("curfew"),disabled:o.curfew,children:o.curfew?t("settings.actions.saving"):d.curfew?t("settings.actions.saveSection"):e.jsx(j,{size:16})})]}),e.jsxs("div",{className:"setting-item toggle-item",children:[e.jsx("div",{className:"setting-info",children:e.jsx("label",{htmlFor:"curfewEnabled",children:t("settings.cutoff.curfewEnable")})}),e.jsx("input",{id:"curfewEnabled",type:"checkbox",checked:((Z=a.curfew)==null?void 0:Z.enabled)||!1,onChange:s=>l("curfew","enabled",s.target.checked),className:"toggle-checkbox"})]}),((H=a.curfew)==null?void 0:H.enabled)&&e.jsxs("div",{className:"integration-fields",children:[e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"curfewStartTime",children:t("settings.cutoff.startTime")}),e.jsx("input",{id:"curfewStartTime",type:"time",value:((V=a.curfew)==null?void 0:V.startTime)||"00:05",onChange:s=>l("curfew","startTime",s.target.value),className:"time-input"}),e.jsx("p",{className:"setting-description",children:t("settings.cutoff.startTimeDesc")})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"curfewEndTime",children:t("settings.cutoff.endTime")}),e.jsx("input",{id:"curfewEndTime",type:"time",value:((G=a.curfew)==null?void 0:G.endTime)||"04:00",onChange:s=>l("curfew","endTime",s.target.value),className:"time-input"}),e.jsx("p",{className:"setting-description",children:t("settings.cutoff.endTimeDesc")})]})]})]})]}),p==="business"&&e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(E,{size:20}),e.jsx("h2",{children:t("settings.general.title")}),e.jsx("button",{className:`btn-save-section ${d.general?"btn-saved":""}`,onClick:()=>y("general"),disabled:o.general,children:o.general?t("settings.actions.saving"):d.general?t("settings.actions.saveSection"):e.jsx(j,{size:16})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",alignItems:"start"},children:[e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"dailyRate",children:t("settings.general.dailyRate")}),e.jsx("div",{className:"input-group",children:e.jsx("input",{id:"dailyRate",type:"number",value:((q=a.contractDefaults)==null?void 0:q.dailyRate)||35e3,onChange:s=>l("contractDefaults","dailyRate",parseInt(s.target.value)),placeholder:X(((J=a.contractDefaults)==null?void 0:J.dailyRate)||"$35000")})}),e.jsx("p",{className:"setting-description",children:t("settings.general.dailyRateDesc")})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"contractDays",children:t("settings.general.contractDays")}),e.jsx("input",{id:"contractDays",type:"number",value:((Q=a.contractDefaults)==null?void 0:Q.contractDays)||500,onChange:s=>l("contractDefaults","contractDays",parseInt(s.target.value)),placeholder:"500"}),e.jsx("p",{className:"setting-description",children:t("settings.general.contractDaysDesc")})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"freeDayPolicy",children:t("settings.general.freeDayPolicy")}),e.jsxs("select",{id:"freeDayPolicy",value:((ee=a.contractDefaults)==null?void 0:ee.freeDayPolicy)||"FLEXIBLE",onChange:s=>l("contractDefaults","freeDayPolicy",s.target.value),children:[e.jsx("option",{value:"FLEXIBLE",children:t("settings.general.policyFlexible")}),e.jsx("option",{value:"FIXED_WEEKDAY",children:t("settings.general.policyFixed")})]}),e.jsx("p",{className:"setting-description",children:t("settings.general.freeDayPolicyDesc")})]}),((se=a.contractDefaults)==null?void 0:se.freeDayPolicy)!=="FIXED_WEEKDAY"?e.jsxs("div",{className:"setting-item",style:{marginLeft:"1rem",borderLeft:"2px solid var(--border-color)",paddingLeft:"1rem"},children:[e.jsx("label",{htmlFor:"freeDaysLimit",children:t("settings.general.freeDaysLimit")}),e.jsx("input",{id:"freeDaysLimit",type:"number",value:((te=a.contractDefaults)==null?void 0:te.freeDaysLimit)||4,onChange:s=>l("contractDefaults","freeDaysLimit",parseInt(s.target.value)),placeholder:"4"}),e.jsx("p",{className:"setting-description",children:t("settings.general.freeDaysLimitDesc")})]}):e.jsxs("div",{className:"setting-item",style:{borderLeft:"2px solid var(--border-color)"},children:[e.jsx("label",{htmlFor:"fixedFreeDayOfWeek",children:t("settings.general.fixedFreeDay")}),e.jsxs("select",{id:"fixedFreeDayOfWeek",value:((ie=a.contractDefaults)==null?void 0:ie.fixedFreeDayOfWeek)||0,onChange:s=>l("contractDefaults","fixedFreeDayOfWeek",parseInt(s.target.value)),children:[e.jsx("option",{value:0,children:t("settings.general.days.sun")}),e.jsx("option",{value:1,children:t("settings.general.days.mon")}),e.jsx("option",{value:2,children:t("settings.general.days.tue")}),e.jsx("option",{value:3,children:t("settings.general.days.wed")}),e.jsx("option",{value:4,children:t("settings.general.days.thu")}),e.jsx("option",{value:5,children:t("settings.general.days.fri")}),e.jsx("option",{value:6,children:t("settings.general.days.sat")})]}),e.jsx("p",{className:"setting-description",children:t("settings.general.fixedFreeDayDesc")})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"initialFee",children:t("settings.general.initialFee")}),e.jsx("div",{className:"input-group",children:e.jsx("input",{id:"initialFee",type:"number",value:((ae=a.contractDefaults)==null?void 0:ae.initialFee)||0,onChange:s=>l("contractDefaults","initialFee",parseInt(s.target.value)),placeholder:X(((ne=a.contractDefaults)==null?void 0:ne.initialFee)||0)})}),e.jsx("p",{className:"setting-description",children:t("settings.general.initialFeeDesc")})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"currency",children:t("settings.general.currency")}),e.jsxs("select",{id:"currency",value:a.currency,onChange:s=>v("currency",s.target.value),children:[e.jsx("option",{value:"COP",children:"COP (Colombian Peso)"}),e.jsx("option",{value:"USD",children:"USD (US Dollar)"}),e.jsx("option",{value:"EUR",children:"EUR (Euro)"})]}),e.jsx("p",{className:"setting-description",children:t("settings.general.currencyDesc")})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"timezone",children:t("settings.general.timezone")}),e.jsxs("select",{id:"timezone",value:a.timezone,onChange:s=>v("timezone",s.target.value),children:[e.jsx("option",{value:"America/Bogota",children:"America/Bogota (UTC-5)"}),e.jsx("option",{value:"America/New_York",children:"America/New_York (UTC-5)"}),e.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles (UTC-8)"}),e.jsx("option",{value:"Europe/London",children:"Europe/London (UTC+0)"})]}),e.jsx("p",{className:"setting-description",children:t("settings.general.timezoneDesc")})]})]})]}),p==="integrations"&&e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(E,{size:20}),e.jsx("h2",{children:t("settings.integrations.gpsTitle")}),e.jsx("button",{className:`btn-save-section ${d.gps?"btn-saved":""}`,onClick:()=>y("gps"),disabled:o.gps,children:o.gps?t("settings.actions.saving"):d.gps?t("settings.actions.saveSection"):e.jsx(j,{size:16})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"gpsService",children:t("settings.integrations.selectProvider")}),e.jsxs("select",{id:"gpsService",value:a.gpsService,onChange:s=>v("gpsService",s.target.value),children:[e.jsx("option",{value:"megarastreo",children:"MegaRastreo"}),e.jsx("option",{value:"traccar",children:t("settings.integrations.traccarNotImplemented")})]})]}),a.gpsService==="megarastreo"&&e.jsxs("div",{className:"integration-fields",children:[e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"mrUser",children:t("settings.integrations.megarastreoUsername")}),e.jsx("input",{id:"mrUser",type:"text",value:a.gpsConfig.user,onChange:s=>l("gpsConfig","user",s.target.value),placeholder:"Enter username"})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"mrPass",children:t("settings.integrations.megarastreoPassword")}),e.jsx("input",{id:"mrPass",type:"password",value:a.gpsConfig.password,onChange:s=>l("gpsConfig","password",s.target.value),placeholder:"Enter password"})]})]}),a.gpsService==="traccar"&&e.jsxs("div",{className:"integration-fields",children:[e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"trHost",children:t("settings.integrations.traccarHost")}),e.jsx("input",{id:"trHost",type:"text",value:a.gpsConfig.host,onChange:s=>l("gpsConfig","host",s.target.value),placeholder:"e.g. 198.74.54.252"})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"trUser",children:t("settings.integrations.traccarUser")}),e.jsx("input",{id:"trUser",type:"text",value:a.gpsConfig.user,onChange:s=>l("gpsConfig","user",s.target.value)})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"trPass",children:t("settings.integrations.traccarPass")}),e.jsx("input",{id:"trPass",type:"password",value:a.gpsConfig.password,onChange:s=>l("gpsConfig","password",s.target.value)})]})]})]}),p==="integrations"&&e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(Ee,{size:20}),e.jsx("h2",{children:t("settings.integrations.wompiTitle")}),e.jsx("button",{className:`btn-save-section ${d.wompi?"btn-saved":""}`,onClick:()=>y("wompi"),disabled:o.wompi,children:o.wompi?t("settings.actions.saving"):d.wompi?t("settings.actions.saveSection"):e.jsx(j,{size:16})})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"wPubKey",children:t("settings.integrations.publicKey")}),e.jsx("input",{id:"wPubKey",type:"text",value:a.wompiConfig.publicKey,onChange:s=>l("wompiConfig","publicKey",s.target.value),placeholder:"pub_test_..."})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"wPrivKey",children:t("settings.integrations.privateKey")}),e.jsx("input",{id:"wPrivKey",type:"password",value:a.wompiConfig.privateKey,onChange:s=>l("wompiConfig","privateKey",s.target.value),placeholder:"prv_test_..."})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"wInteg",children:t("settings.integrations.integritySecret")}),e.jsx("input",{id:"wInteg",type:"password",value:a.wompiConfig.integritySecret,onChange:s=>l("wompiConfig","integritySecret",s.target.value),placeholder:"test_integrity_..."})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("label",{htmlFor:"wEvents",children:t("settings.integrations.eventsSecret")}),e.jsx("input",{id:"wEvents",type:"password",value:a.wompiConfig.eventsSecret,onChange:s=>l("wompiConfig","eventsSecret",s.target.value),placeholder:"test_events_..."})]})]}),p==="system"&&e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(E,{size:20}),e.jsx("h2",{children:t("settings.system.title")})]}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:t("settings.system.version")}),e.jsx("div",{className:"info-value",children:"1.0.0"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:t("settings.system.dbStatus")}),e.jsx("div",{className:"info-value status-connected",children:t("settings.system.connected")})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:t("settings.system.apiStatus")}),e.jsx("div",{className:"info-value status-connected",children:t("settings.system.active")})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("div",{className:"info-label",children:t("settings.system.lastBackup")}),e.jsx("div",{className:"info-value",children:t("settings.system.never")})]})]}),e.jsxs("div",{className:"setting-item sync-devices-row",style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"1px solid #E5E7EB",display:"block"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.25rem"},children:t("settings.system.discoveryTitle")}),e.jsx("p",{className:"setting-description",style:{marginBottom:"1.25rem"},children:t("settings.system.discoveryDesc")}),e.jsxs("div",{className:"sync-devices-controls",children:[e.jsxs("button",{className:`btn-sync-devices ${f.loading?"loading":""}`,onClick:oe,disabled:f.loading,title:"Fetch devices from GPS provider",style:{padding:"0.75rem 1.5rem",background:"#03C9D7",color:"white",border:"none",borderRadius:"0.5rem"},children:[e.jsx(le,{size:15,className:f.loading?"spin":""}),f.loading?t("settings.system.syncing"):t("settings.system.syncNow")]}),f.result&&e.jsxs("span",{className:"sync-result success",style:{marginLeft:"1rem"},children:["✓ ",f.result.message]}),f.error&&e.jsxs("span",{className:"sync-result error",style:{marginLeft:"1rem"},children:["✗ ",f.error]})]})]})]})]}),e.jsx("div",{className:"settings-actions",children:e.jsxs("button",{className:`btn-save ${M?"btn-saved":""}`,onClick:xe,children:[e.jsx(j,{}),t(M?"settings.actions.allSaved":"settings.actions.saveAll")]})}),P&&e.jsx("div",{className:"crop-modal-overlay",children:e.jsxs("div",{className:"crop-modal-content",children:[e.jsx("h3",{className:"crop-modal-title",children:t("settings.crop.title")}),e.jsx("div",{className:"crop-canvas-container",children:e.jsx("canvas",{ref:N,width:600,height:600,className:"crop-canvas",onMouseDown:ge,onMouseMove:me,onMouseUp:K,onMouseLeave:K,onTouchStart:he,onTouchMove:ue,onTouchEnd:pe,onWheel:Ne})}),e.jsxs("div",{className:"crop-controls",children:[e.jsxs("div",{className:"zoom-controls",children:[e.jsx("button",{className:"btn-zoom",onClick:be,title:"Zoom Out",children:e.jsx(Be,{size:20})}),e.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.01",value:u,onChange:ye,className:"zoom-slider"}),e.jsx("button",{className:"btn-zoom",onClick:je,title:"Zoom In",children:e.jsx(Oe,{size:20})})]}),e.jsx("p",{className:"crop-hint",children:t("settings.crop.hint")})]}),e.jsxs("div",{className:"crop-actions",children:[e.jsx("button",{className:"btn-cancel",onClick:Y,children:t("settings.crop.cancel")}),e.jsx("button",{className:"btn-crop",onClick:ve,children:t("settings.crop.save")})]})]})})]})};export{Ve as default};
