import{u as b,a as g,b as f,j as s,r as x,N as j,O as k}from"./index-DYjkxkRa.js";import{u as y}from"./useTranslation-CN7cxfpF.js";import{c as l}from"./createLucideIcon-b_PnP7i0.js";import{U as w}from"./users-DyTGB4Ft.js";import{F as C}from"./file-text-Cejw2rtJ.js";import{C as z}from"./credit-card-BtYRGhhM.js";import{D as $}from"./dollar-sign-4mQ7fe36.js";import{S as M}from"./settings-CrYn20B_.js";import"./index-5MHfkS4G.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],W=l("house",A);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],S=l("log-out",L);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],u=l("menu",_),E=({isOpen:n,onToggle:t})=>{var v;const{user:a,logout:o,isAdmin:d}=b(),{t:e}=y(),m=g(),h=f(),p=()=>{o(),m("/admin/login")},r=i=>{window.matchMedia("(max-width: 768px)").matches&&n&&t(),m(i)},c=i=>h.pathname===i,N=()=>{const i=h.pathname;return i==="/"?e("sidebar.dashboard"):i.startsWith("/devices")?e("sidebar.devices"):i.startsWith("/contracts")?e("sidebar.contracts"):i.startsWith("/payments")?e("sidebar.payments"):i.startsWith("/invoices")?e("sidebar.invoices"):i.startsWith("/settings")?e("sidebar.settings"):"PocketBike"};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mobile-header",children:[s.jsx("button",{className:"toggle-btn",onClick:t,children:s.jsx(u,{size:24})}),s.jsx("div",{className:"logo-container",children:s.jsx("h2",{children:N()})}),s.jsx("div",{id:"mobile-header-actions",style:{minWidth:40,display:"flex",justifyContent:"flex-end",alignItems:"center"}})]}),s.jsx("div",{className:`sidebar-overlay ${n?"active":""}`,onClick:t}),s.jsxs("div",{className:`admin-sidebar ${n?"open":"closed"}`,children:[s.jsx("div",{className:"sidebar-header",children:s.jsxs("div",{className:"logo-container",children:[s.jsx("button",{className:"toggle-btn",onClick:t,children:s.jsx(u,{size:20})}),s.jsx("h2",{children:"PocketBike"})]})}),s.jsxs("nav",{className:"sidebar-nav",children:[d()&&s.jsxs("div",{className:"nav-section",children:[s.jsx("h4",{children:e("sidebar.main")}),s.jsxs("button",{className:`nav-item ${c("/")?"active":""}`,onClick:()=>r("/"),title:e("sidebar.dashboard"),children:[s.jsx(W,{size:20}),s.jsx("span",{children:e("sidebar.dashboard")})]}),s.jsxs("button",{className:`nav-item ${c("/devices")?"active":""}`,onClick:()=>r("/devices"),title:e("sidebar.devices"),children:[s.jsx(w,{size:20}),s.jsx("span",{children:e("sidebar.devices")})]})]}),s.jsxs("div",{className:"nav-section",children:[s.jsx("h4",{children:e("sidebar.management")}),s.jsxs("button",{className:`nav-item ${c("/contracts")?"active":""}`,onClick:()=>r("/contracts"),title:e("sidebar.contracts"),children:[s.jsx(C,{size:20}),s.jsx("span",{children:e("sidebar.contracts")})]}),s.jsxs("button",{className:`nav-item ${c("/payments")?"active":""}`,onClick:()=>r("/payments"),title:e("sidebar.payments"),children:[s.jsx(z,{size:20}),s.jsx("span",{children:e("sidebar.payments")})]}),s.jsxs("button",{className:`nav-item ${c("/invoices")?"active":""}`,onClick:()=>r("/invoices"),title:e("sidebar.invoices"),children:[s.jsx($,{size:20}),s.jsx("span",{children:e("sidebar.invoices")})]})]}),s.jsxs("div",{className:"nav-section",children:[s.jsx("h4",{children:e("sidebar.system")}),s.jsxs("button",{className:`nav-item ${c("/settings")?"active":""}`,onClick:()=>r("/settings"),title:e("sidebar.settings"),children:[s.jsx(M,{size:20}),s.jsx("span",{children:e("sidebar.settings")})]}),s.jsxs("button",{className:"nav-item logout",onClick:p,title:e("sidebar.logout"),children:[s.jsx(S,{size:20}),s.jsx("span",{children:e("sidebar.logout")})]})]})]}),s.jsx("div",{className:"sidebar-footer",children:s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-avatar",children:((v=a==null?void 0:a.name)==null?void 0:v.charAt(0))||"A"}),s.jsxs("div",{className:"user-details",children:[s.jsx("div",{className:"user-name",children:a==null?void 0:a.name}),s.jsx("div",{className:"user-role",children:d()?"Admin":"User"})]})]})})]})]})},V=()=>{const[n,t]=x.useState(window.innerWidth>768);x.useEffect(()=>{const e=()=>{window.innerWidth<=768?t(!1):t(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{isAuthenticated:a,authType:o,user:d}=b();return a()&&o==="device"?s.jsx(j,{to:`/Id/${d.deviceId}`,replace:!0}):a()?s.jsxs("div",{className:"admin-layout",children:[s.jsx(E,{isOpen:n,onToggle:()=>t(!n)}),s.jsx("main",{className:`admin-content ${n?"sidebar-open":"sidebar-closed"}`,children:s.jsx(k,{})})]}):s.jsx(j,{to:"/admin/login",replace:!0})};export{V as default};
