import{u as p,r as t,g as N,j as e}from"./main-D_cgSQuf.js";import{D}from"./dollar-sign-BkU3Bhqy.js";import{F as b}from"./file-text-BukNFnm7.js";import{C as f}from"./credit-card-BjNAvya6.js";import{U as S}from"./users-Ca_sXAYQ.js";import{T as y}from"./trending-up-B_T21wD-.js";import{c as C}from"./createLucideIcon-XZj3iZ8D.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],A=C("trending-down",w),M=()=>{const{user:c}=p(),[n,l]=t.useState({totalRevenue:0,activeContracts:0,pendingPayments:0,totalDevices:0}),[L,o]=t.useState([]),[P,h]=t.useState([]),[i,x]=t.useState([]),[j,d]=t.useState(!0);t.useEffect(()=>{m()},[]);const m=async()=>{d(!0);try{const s=await N();s.success?(l(s.data.stats),o(s.data.revenueData),h(s.data.deviceData),x(s.data.recentPayments)):console.error("Failed to fetch dashboard data:",s.error)}catch(s){console.error("Error fetching dashboard data:",s)}finally{d(!1)}},r=({title:s,value:v,change:a,icon:u,color:g})=>e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:g},children:e.jsx(u,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s}),e.jsx("div",{className:"stat-value",children:v}),a!==void 0&&a!==0&&e.jsxs("div",{className:`stat-change ${a>0?"positive":"negative"}`,children:[a>0?e.jsx(y,{size:16}):e.jsx(A,{size:16}),Math.abs(a),"%"]})]})]});return j?e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("p",{children:["Welcome back, ",(c==null?void 0:c.name)||"Admin","!"]})]}),e.jsx("button",{className:"btn-download",children:"ðŸ“Š Download Report"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx(r,{title:"Total Revenue",value:`$${(n.totalRevenue/100).toLocaleString()}`,change:12.5,icon:D,color:"#03C9D7"}),e.jsx(r,{title:"Active Contracts",value:n.activeContracts,change:5.2,icon:b,color:"#FB9678"}),e.jsx(r,{title:"Pending Payments",value:n.pendingPayments,change:-2.1,icon:f,color:"#00C292"}),e.jsx(r,{title:"Total Devices",value:n.totalDevices,change:0,icon:S,color:"#7460EE"})]}),e.jsxs("div",{className:"charts-grid",children:[e.jsx("div",{className:"chart-card revenue-chart",children:e.jsxs("div",{className:"chart-header",children:[e.jsx("h3",{children:"Revenue Overview"}),e.jsxs("select",{className:"chart-filter",children:[e.jsx("option",{children:"Last 6 Months"}),e.jsx("option",{children:"Last Year"})]})]})}),e.jsx("div",{className:"chart-card",children:e.jsx("h3",{children:"Device Status"})})]}),e.jsxs("div",{className:"table-card",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("h3",{children:"Recent Payments"}),e.jsx("a",{href:"#/payments",className:"view-all",children:"View All â†’"})]}),e.jsxs("table",{className:"payments-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Device"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Date"})]})}),e.jsx("tbody",{children:i.length>0?i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:s.device})}),e.jsxs("td",{children:["$",(s.amount/100).toLocaleString()," COP"]}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${(s.status||"unknown").toLowerCase()}`,children:s.status||"Unknown"})}),e.jsx("td",{children:s.date})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#9CA3AF"},children:"No recent payments"})})})]})]})]})};export{M as default};
