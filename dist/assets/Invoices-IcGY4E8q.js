import{r as n,t as E,v as S,j as s}from"./main-C1Sfkfil.js";import{u as L}from"./useTranslation-CiRU4ROT.js";import{F as N}from"./file-text-DNTuAW6a.js";import{C as A}from"./check-DZRCZ4fl.js";import{X as p,S as k}from"./x-7SGPei2i.js";import{D as w}from"./dollar-sign-DRxWpRMY.js";import{c as D}from"./createLucideIcon-_2uQCNRD.js";import{C as F}from"./calendar-CImsKiXo.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],P=D("funnel",T),G=()=>{const{t:a}=L(),[m,f]=n.useState([]),[g,h]=n.useState(!0),[i,l]=n.useState("all"),[c,v]=n.useState(""),[r,y]=n.useState({total:0,paid:0,unpaid:0,totalAmount:0});n.useEffect(()=>{C(),b()},[]);const b=async()=>{try{const e=await E();e.success&&y(e.stats)}catch(e){console.error("Error loading stats:",e)}},C=async()=>{h(!0);try{const e=await S({page:1,limit:50});e.success?f(e.invoices||[]):console.error("Error loading invoices:",e.error)}catch(e){console.error("Error loading invoices:",e)}finally{h(!1)}},x=e=>`$${e.toLocaleString()} COP`,I=e=>{const t=new Date(e);return e?t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"--"},u=e=>({PAID:"#3b64c6",DEBT:"#EF4444",LOAN:"#00c292",FREE:"#00c292",PENDING:"#FB9678",CANCELLED:"#6B7280"})[e]||"#6B7280",d=m.filter(e=>{var t,j;if(i!=="all"&&e.dayType.toLowerCase()!==i.toLowerCase())return!1;if(c){const o=c.toLowerCase();return e.invoiceId.toLowerCase().includes(o)||e.deviceId.toLowerCase().includes(o)||((t=e.contractId)==null?void 0:t.toLowerCase().includes(o))||((j=e.paymentReference)==null?void 0:j.toLowerCase().includes(o))}return!0});return s.jsxs("div",{className:"invoices-page",children:[s.jsx("div",{className:"page-header",children:s.jsx("div",{children:s.jsx("h1",{children:a("invoices.title")})})}),s.jsxs("div",{className:"invoices-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#03C9D7"},children:s.jsx(N,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total"}),s.jsx("div",{className:"stat-number",children:r.total})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#00C292"},children:s.jsx(A,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:a("invoices.filterPaid")}),s.jsx("div",{className:"stat-number",children:r.paid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#EF4444"},children:s.jsx(p,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:a("invoices.filterUnpaid")}),s.jsx("div",{className:"stat-number",children:r.unpaid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#7460EE"},children:s.jsx(w,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total Amount"}),s.jsx("div",{className:"stat-number",children:x(r.totalAmount)})]})]})]}),s.jsxs("div",{className:"invoices-filters",children:[s.jsxs("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>l("all"),children:[s.jsx(P,{})," ",a("invoices.filterAll")]}),s.jsx("button",{className:`filter-btn ${i==="paid"?"active":""}`,onClick:()=>l("paid"),children:a("invoices.filterPaid")}),s.jsx("button",{className:`filter-btn ${i==="unpaid"?"active":""}`,onClick:()=>l("unpaid"),children:a("invoices.filterUnpaid")}),s.jsx("button",{className:`filter-btn ${i==="pending"?"active":""}`,onClick:()=>l("pending"),children:a("invoices.filterPending")}),s.jsxs("div",{className:"search-box",children:[s.jsx(k,{className:"search-icon"}),s.jsx("input",{type:"text",placeholder:a("invoices.searchPlaceholder"),value:c,onChange:e=>v(e.target.value)}),c&&s.jsx("button",{className:"clear-search",onClick:()=>v(""),children:s.jsx(p,{})})]})]}),g?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:a("common.loading")})]}):d.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(N,{size:48}),s.jsx("h3",{children:a("invoices.empty")}),s.jsx("p",{children:c?`"${c}"`:a("invoices.empty")})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"invoices-table",children:[s.jsxs("div",{className:"table-header",children:[s.jsx("div",{children:"ID Factura"}),s.jsx("div",{children:a("login.deviceId")}),s.jsx("div",{children:"Amount"}),s.jsx("div",{children:"Dia Pago"}),s.jsx("div",{children:a("common.status")})]}),d.map(e=>{var t;return s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"invoice-id",children:e.invoiceId}),s.jsx("div",{className:"device-id",children:e.deviceIdName}),s.jsx("div",{className:"invoice-amount",children:x(e.paidAmount)}),s.jsxs("div",{className:"invoice-date",children:[s.jsx(F,{size:14}),I((t=e.transaction)==null?void 0:t.finalized_at)]}),s.jsx("div",{className:"invoice-status",children:s.jsx("span",{className:"status-badge",style:{background:`${u(e.dayType)}20`,color:u(e.dayType)},children:e.dayType})})]},e.invoiceId)})]}),s.jsxs("div",{className:"results-info",children:["Showing ",d.length," of ",m.length," invoices"]})]})]})};export{G as default};
