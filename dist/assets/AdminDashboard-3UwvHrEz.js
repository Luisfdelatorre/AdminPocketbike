import{u as y,r as n,g as f,j as e}from"./main-DVAXFARq.js";import{u as N}from"./useTranslation-LM3aqFs0.js";import{D as P}from"./dollar-sign-B5DZ-WZI.js";import{U as S}from"./users-DinY5JfH.js";import{C as w}from"./credit-card-CRlv_u6l.js";import{T as C}from"./trending-up-BktgYemw.js";import{c as R}from"./createLucideIcon-Cp5FBxft.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],L=R("trending-down",A),O=()=>{var o,l,h;const{user:k}=y(),{t:a}=N(),[t,m]=n.useState({totalRevenue:0,activeDevices:0,pendingPayments:0,totalDevices:0}),[$,x]=n.useState([]),[E,v]=n.useState([]),[c,j]=n.useState([]),[u,i]=n.useState(!0);n.useEffect(()=>{b()},[]);const b=async()=>{i(!0);try{const s=await f();s.success?(m(s.data.stats),x(s.data.revenueData),v(s.data.deviceData),j(s.data.recentPayments)):console.error("Failed to fetch dashboard data:",s.error)}catch(s){console.error("Error fetching dashboard data:",s)}finally{i(!1)}},d=({title:s,value:g,change:r,icon:p,color:D})=>e.jsxs("div",{className:"stat-card",children:[r!==void 0&&r!==0&&e.jsxs("div",{className:`stat-change-corner ${r>0?"positive":"negative"}`,children:[r>0?e.jsx(C,{size:14}):e.jsx(L,{size:14}),Math.abs(r),"%"]}),e.jsx("div",{className:"stat-icon",style:{background:D},children:e.jsx(p,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s}),e.jsx("div",{className:"stat-value",children:g})]})]});return u?e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:a("dashboard.loading")})]})}):e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("div",{children:e.jsx("h1",{children:a("dashboard.title")})}),e.jsxs("button",{className:"btn-download",children:["ðŸ“Š ",a("dashboard.downloadReport")]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx(d,{title:a("dashboard.stats.totalRevenue"),value:`$${t.totalRevenue.toLocaleString()}`,change:((o=t.changes)==null?void 0:o.totalRevenue)||0,icon:P,color:"#03C9D7"}),e.jsx(d,{title:a("dashboard.stats.activeDevices","Active Devices"),value:t.activeDevices||0,change:((l=t.changes)==null?void 0:l.activeDevices)||0,icon:S,color:"#FB9678"}),e.jsx(d,{title:a("dashboard.stats.pendingPayments"),value:t.pendingPayments,change:((h=t.changes)==null?void 0:h.pendingPayments)||0,icon:w,color:"#00C292"})]}),e.jsxs("div",{className:"table-card",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("h3",{children:a("dashboard.recentPayments.title")}),e.jsxs("a",{href:"#/payments",className:"view-all",children:[a("dashboard.recentPayments.viewAll")," â†’"]})]}),e.jsxs("table",{className:"payments-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("dashboard.recentPayments.table.device")}),e.jsx("th",{children:a("dashboard.recentPayments.table.amount")}),e.jsx("th",{children:a("dashboard.recentPayments.table.status")}),e.jsx("th",{children:a("dashboard.recentPayments.table.date")})]})}),e.jsx("tbody",{children:c.length>0?c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:s.device})}),e.jsxs("td",{children:["$",s.amount.toLocaleString()," COP"]}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${(s.status||"unknown").toLowerCase()}`,children:s.status||"Unknown"})}),e.jsx("td",{children:s.date})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#9CA3AF"},children:a("dashboard.recentPayments.noPayments")})})})]})]})]})};export{O as default};
