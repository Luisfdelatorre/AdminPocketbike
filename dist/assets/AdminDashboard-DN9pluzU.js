import{u as g,r as t,g as N,j as s}from"./main-CfsT50y0.js";import{u as f}from"./useTranslation-Dr7ilz_7.js";import{D as y}from"./dollar-sign-BlM_MgUk.js";import{F as D}from"./file-text-CiGaxbES.js";import{C as P}from"./credit-card-Bnz6NQWv.js";import{U as S}from"./users-CYM2wYj2.js";import{T as C}from"./trending-up-Bvbw6aVm.js";import{c as w}from"./createLucideIcon-BVLfzT-S.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],R=w("trending-down",A),I=()=>{const{user:c}=g(),{t:e}=f(),[d,l]=t.useState({totalRevenue:0,activeContracts:0,pendingPayments:0,totalDevices:0}),[E,h]=t.useState([]),[L,m]=t.useState([]),[i,x]=t.useState([]),[j,o]=t.useState(!0);t.useEffect(()=>{v()},[]);const v=async()=>{o(!0);try{const a=await N();a.success?(l(a.data.stats),h(a.data.revenueData),m(a.data.deviceData),x(a.data.recentPayments)):console.error("Failed to fetch dashboard data:",a.error)}catch(a){console.error("Error fetching dashboard data:",a)}finally{o(!1)}},n=({title:a,value:u,change:r,icon:b,color:p})=>s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:p},children:s.jsx(b,{size:24})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h3",{children:a}),s.jsx("div",{className:"stat-value",children:u}),r!==void 0&&r!==0&&s.jsxs("div",{className:`stat-change ${r>0?"positive":"negative"}`,children:[r>0?s.jsx(C,{size:16}):s.jsx(R,{size:16}),Math.abs(r),"%"]})]})]});return j?s.jsx("div",{className:"dashboard-content",children:s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:e("dashboard.loading")})]})}):s.jsxs("div",{className:"dashboard-content",children:[s.jsxs("div",{className:"dashboard-header",children:[s.jsxs("div",{children:[s.jsx("h1",{children:e("dashboard.title")}),s.jsx("p",{children:e("dashboard.welcome",{name:(c==null?void 0:c.name)||"Admin"})})]}),s.jsxs("button",{className:"btn-download",children:["ðŸ“Š ",e("dashboard.downloadReport")]})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsx(n,{title:e("dashboard.stats.totalRevenue"),value:`$${(d.totalRevenue/100).toLocaleString()}`,change:12.5,icon:y,color:"#03C9D7"}),s.jsx(n,{title:e("dashboard.stats.activeContracts"),value:d.activeContracts,change:5.2,icon:D,color:"#FB9678"}),s.jsx(n,{title:e("dashboard.stats.pendingPayments"),value:d.pendingPayments,change:-2.1,icon:P,color:"#00C292"}),s.jsx(n,{title:e("dashboard.stats.totalDevices"),value:d.totalDevices,change:0,icon:S,color:"#7460EE"})]}),s.jsxs("div",{className:"charts-grid",children:[s.jsx("div",{className:"chart-card revenue-chart",children:s.jsxs("div",{className:"chart-header",children:[s.jsx("h3",{children:e("dashboard.charts.revenue")}),s.jsxs("select",{className:"chart-filter",children:[s.jsx("option",{children:e("dashboard.charts.last6Months")}),s.jsx("option",{children:e("dashboard.charts.lastYear")})]})]})}),s.jsx("div",{className:"chart-card",children:s.jsx("h3",{children:e("dashboard.charts.deviceStatus")})})]}),s.jsxs("div",{className:"table-card",children:[s.jsxs("div",{className:"table-header",children:[s.jsx("h3",{children:e("dashboard.recentPayments.title")}),s.jsxs("a",{href:"#/payments",className:"view-all",children:[e("dashboard.recentPayments.viewAll")," â†’"]})]}),s.jsxs("table",{className:"payments-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:e("dashboard.recentPayments.table.device")}),s.jsx("th",{children:e("dashboard.recentPayments.table.amount")}),s.jsx("th",{children:e("dashboard.recentPayments.table.status")}),s.jsx("th",{children:e("dashboard.recentPayments.table.date")})]})}),s.jsx("tbody",{children:i.length>0?i.map(a=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:a.device})}),s.jsxs("td",{children:["$",(a.amount/100).toLocaleString()," COP"]}),s.jsx("td",{children:s.jsx("span",{className:`status-badge ${(a.status||"unknown").toLowerCase()}`,children:a.status||"Unknown"})}),s.jsx("td",{children:a.date})]},a.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#9CA3AF"},children:e("dashboard.recentPayments.noPayments")})})})]})]})]})};export{I as default};
