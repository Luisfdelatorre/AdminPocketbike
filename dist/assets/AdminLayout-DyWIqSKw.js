import{u as p,a as f,b as k,j as s,r as v,N as j,O as y}from"./main-CESdpagL.js";import{u as C}from"./useTranslation-DcNv4gPV.js";import{c as o}from"./createLucideIcon-BSP4zInn.js";import{U as u}from"./users-Dq-dkqBF.js";import{C as z}from"./calendar-BBapwrek.js";import{F as $}from"./file-text-Bv-pKF8B.js";import{C as w}from"./credit-card-CzqptxTT.js";import{D as A}from"./dollar-sign-3p03K1Xc.js";import{B as M}from"./building-DmmSbvSI.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],_=o("house",W);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],S=o("log-out",L);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],b=o("menu",E);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H=o("settings",B),I=({isOpen:c,onToggle:r})=>{var x;const{user:i,logout:l,isAdmin:d}=p(),{t:e}=C(),m=f(),h=k(),N=()=>{l(),m("/admin/login")},t=a=>{window.matchMedia("(max-width: 768px)").matches&&c&&r(),m(a)},n=a=>h.pathname===a,g=()=>{const a=h.pathname;return a==="/"?e("sidebar.dashboard"):a.startsWith("/devices")?e("sidebar.devices"):a.startsWith("/contracts")?e("sidebar.contracts"):a.startsWith("/payments")?e("sidebar.payments"):a.startsWith("/invoices")?e("sidebar.invoices"):a.startsWith("/settings")?e("sidebar.settings"):"PocketBike"};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mobile-header",children:[s.jsx("button",{className:"toggle-btn",onClick:r,children:s.jsx(b,{size:24})}),s.jsx("div",{className:"logo-container",children:s.jsx("h2",{children:g()})}),s.jsx("div",{id:"mobile-header-actions",style:{minWidth:40,display:"flex",justifyContent:"flex-end",alignItems:"center"}})]}),s.jsx("div",{className:`sidebar-overlay ${c?"active":""}`,onClick:r}),s.jsxs("div",{className:`admin-sidebar ${c?"open":"closed"}`,children:[s.jsx("div",{className:"sidebar-header",children:s.jsxs("div",{className:"logo-container",children:[s.jsx("button",{className:"toggle-btn",onClick:r,children:s.jsx(b,{size:20})}),s.jsx("h2",{children:"PocketBike"})]})}),s.jsxs("nav",{className:"sidebar-nav",children:[d()&&s.jsxs("div",{className:"nav-section",children:[s.jsx("h4",{children:e("sidebar.main")}),s.jsxs("button",{className:`nav-item ${n("/")?"active":""}`,onClick:()=>t("/"),title:e("sidebar.dashboard"),children:[s.jsx(_,{size:20}),s.jsx("span",{children:e("sidebar.dashboard")})]}),s.jsxs("button",{className:`nav-item ${n("/devices")?"active":""}`,onClick:()=>t("/devices"),title:e("sidebar.devices"),children:[s.jsx(u,{size:20}),s.jsx("span",{children:e("sidebar.devices")})]}),s.jsxs("button",{className:`nav-item ${n("/summary")?"active":""}`,onClick:()=>t("/summary"),title:"Resumen de Pagos",children:[s.jsx(z,{size:20}),s.jsx("span",{children:"Resumen"})]})]}),s.jsxs("div",{className:"nav-section",children:[s.jsx("h4",{children:e("sidebar.management")}),s.jsxs("button",{className:`nav-item ${n("/contracts")?"active":""}`,onClick:()=>t("/contracts"),title:e("sidebar.contracts"),children:[s.jsx($,{size:20}),s.jsx("span",{children:e("sidebar.contracts")})]}),s.jsxs("button",{className:`nav-item ${n("/payments")?"active":""}`,onClick:()=>t("/payments"),title:e("sidebar.payments"),children:[s.jsx(w,{size:20}),s.jsx("span",{children:e("sidebar.payments")})]}),s.jsxs("button",{className:`nav-item ${n("/invoices")?"active":""}`,onClick:()=>t("/invoices"),title:e("sidebar.invoices"),children:[s.jsx(A,{size:20}),s.jsx("span",{children:e("sidebar.invoices")})]})]}),s.jsxs("div",{className:"nav-section",children:[s.jsx("h4",{children:e("sidebar.system")}),s.jsxs("button",{className:`nav-item ${n("/settings")?"active":""}`,onClick:()=>t("/settings"),title:e("sidebar.settings"),children:[s.jsx(H,{size:20}),s.jsx("span",{children:e("sidebar.settings")})]}),s.jsxs("button",{className:`nav-item ${n("/users")?"active":""}`,onClick:()=>t("/users"),title:e("sidebar.users"),children:[s.jsx(u,{size:20}),s.jsx("span",{children:e("sidebar.users")})]}),(i==null?void 0:i.isSuperAdmin)&&s.jsxs("button",{className:`nav-item ${n("/companies")?"active":""}`,onClick:()=>t("/companies"),title:e("sidebar.companies"),children:[s.jsx(M,{size:20}),s.jsx("span",{children:e("sidebar.companies")})]}),s.jsxs("button",{className:"nav-item logout",onClick:N,title:e("sidebar.logout"),children:[s.jsx(S,{size:20}),s.jsx("span",{children:e("sidebar.logout")})]})]})]}),s.jsx("div",{className:"sidebar-footer",children:s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-avatar",children:((x=i==null?void 0:i.name)==null?void 0:x.charAt(0))||"A"}),s.jsxs("div",{className:"user-details",children:[s.jsx("div",{className:"user-name",children:i==null?void 0:i.name}),s.jsx("div",{className:"user-role",children:d()?"Admin":"User"})]})]})})]})]})},K=()=>{const[c,r]=v.useState(window.innerWidth>768);v.useEffect(()=>{const e=()=>{window.innerWidth<=768?r(!1):r(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{isAuthenticated:i,authType:l,user:d}=p();return i()&&l==="device"?s.jsx(j,{to:`/Id/${d.deviceId}`,replace:!0}):i()?s.jsxs("div",{className:"admin-layout",children:[s.jsx(I,{isOpen:c,onToggle:()=>r(!c)}),s.jsx("main",{className:`admin-content ${c?"sidebar-open":"sidebar-closed"}`,children:s.jsx(y,{})})]}):s.jsx(j,{to:"/admin/login",replace:!0})};export{K as default};
