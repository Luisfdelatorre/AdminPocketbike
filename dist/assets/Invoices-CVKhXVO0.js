import{r as l,j as s}from"./main-D_cgSQuf.js";import{u as y}from"./useTranslation-CL1l3JXj.js";import{F as N}from"./file-text-BukNFnm7.js";import{C as I}from"./check-Bq2xJ7Bd.js";import{X as f}from"./x-B2EpSVsf.js";import{D}from"./dollar-sign-BkU3Bhqy.js";import{S as L}from"./search-83wxcXmB.js";import{c as A}from"./createLucideIcon-XZj3iZ8D.js";import{C as S}from"./calendar-DzjIzDO-.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],w=A("funnel",k),R=()=>{const{t:a}=y(),[i,p]=l.useState([]),[g,h]=l.useState(!0),[c,r]=l.useState("all"),[n,v]=l.useState("");l.useEffect(()=>{b()},[]);const b=async()=>{h(!0);try{const t=await(await fetch("/apinode/invoices/all?page=1&limit=1000")).json();t.success?p(t.invoices||[]):console.error("Error loading invoices:",t.error)}catch(e){console.error("Error loading invoices:",e)}finally{h(!1)}},u=e=>`$${(e/100).toLocaleString()} COP`,C=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),x=e=>({PAID:"#00C292",UNPAID:"#EF4444",PENDING:"#FB9678",CANCELLED:"#6B7280"})[e]||"#6B7280",m=i.filter(e=>{var t,j;if(c!=="all"&&e.status.toLowerCase()!==c.toLowerCase())return!1;if(n){const o=n.toLowerCase();return e.invoiceId.toLowerCase().includes(o)||e.deviceId.toLowerCase().includes(o)||((t=e.contractId)==null?void 0:t.toLowerCase().includes(o))||((j=e.paymentReference)==null?void 0:j.toLowerCase().includes(o))}return!0}),d={total:i.length,paid:i.filter(e=>e.status==="PAID").length,unpaid:i.filter(e=>e.status==="UNPAID").length,totalAmount:i.reduce((e,t)=>e+t.amount,0)};return s.jsxs("div",{className:"invoices-page",children:[s.jsx("div",{className:"page-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:a("invoices.title")}),s.jsx("p",{children:a("invoices.subtitle")})]})}),s.jsxs("div",{className:"invoices-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#03C9D7"},children:s.jsx(N,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total"}),s.jsx("div",{className:"stat-number",children:d.total})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#00C292"},children:s.jsx(I,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:a("invoices.filterPaid")}),s.jsx("div",{className:"stat-number",children:d.paid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#EF4444"},children:s.jsx(f,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:a("invoices.filterUnpaid")}),s.jsx("div",{className:"stat-number",children:d.unpaid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#7460EE"},children:s.jsx(D,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total Amount"}),s.jsx("div",{className:"stat-number",children:u(d.totalAmount)})]})]})]}),s.jsx("div",{className:"invoices-search",children:s.jsxs("div",{className:"search-box",children:[s.jsx(L,{className:"search-icon"}),s.jsx("input",{type:"text",placeholder:a("invoices.searchPlaceholder"),value:n,onChange:e=>v(e.target.value)}),n&&s.jsx("button",{className:"clear-search",onClick:()=>v(""),children:s.jsx(f,{})})]})}),s.jsxs("div",{className:"invoices-filters",children:[s.jsxs("button",{className:`filter-btn ${c==="all"?"active":""}`,onClick:()=>r("all"),children:[s.jsx(w,{})," ",a("invoices.filterAll")]}),s.jsx("button",{className:`filter-btn ${c==="paid"?"active":""}`,onClick:()=>r("paid"),children:a("invoices.filterPaid")}),s.jsx("button",{className:`filter-btn ${c==="unpaid"?"active":""}`,onClick:()=>r("unpaid"),children:a("invoices.filterUnpaid")}),s.jsx("button",{className:`filter-btn ${c==="pending"?"active":""}`,onClick:()=>r("pending"),children:a("invoices.filterPending")})]}),g?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:a("common.loading")})]}):m.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(N,{size:48}),s.jsx("h3",{children:a("invoices.empty")}),s.jsx("p",{children:n?`"${n}"`:a("invoices.empty")})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"invoices-table",children:[s.jsxs("div",{className:"table-header",children:[s.jsx("div",{children:"ID"}),s.jsx("div",{children:a("devices.table.contract")}),s.jsx("div",{children:a("login.deviceId")}),s.jsx("div",{children:"Date"}),s.jsx("div",{children:"Amount"}),s.jsx("div",{children:a("common.status")})]}),m.map(e=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"invoice-id",children:e.invoiceId}),s.jsx("div",{className:"contract-id",children:e.contractId||"-"}),s.jsx("div",{className:"device-id",children:e.deviceId}),s.jsxs("div",{className:"invoice-date",children:[s.jsx(S,{size:14}),C(e.date)]}),s.jsx("div",{className:"invoice-amount",children:u(e.amount)}),s.jsx("div",{className:"invoice-status",children:s.jsx("span",{className:"status-badge",style:{background:`${x(e.status)}20`,color:x(e.status)},children:e.status})})]},e.invoiceId))]}),s.jsxs("div",{className:"results-info",children:["Showing ",m.length," of ",i.length," invoices"]})]})]})};export{R as default};
