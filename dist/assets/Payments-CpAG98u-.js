import{r as c,q as F,j as e}from"./main-CLN5GBsR.js";import{u as O}from"./useTranslation-CJEXlQpI.js";import{D as w}from"./dollar-sign-CRMCiP11.js";import{C as T}from"./check-DFsMJg1u.js";import{C as U}from"./clock-DApxFxLh.js";import{C as y}from"./credit-card-ry7Avp95.js";import{c as N}from"./createLucideIcon-DbnyYsP5.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],z=N("chevron-left",V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],G=N("chevron-right",B),X=()=>{const{t:a}=O(),[r,v]=c.useState([]),[f,m]=c.useState(!0),[i,b]=c.useState("all"),[p,C]=c.useState("date"),[n,d]=c.useState({page:1,limit:20,total:0,totalPages:0,hasNext:!1,hasPrev:!1});c.useEffect(()=>{h()},[n.page,i]);const h=async()=>{m(!0);try{const t={page:n.page,limit:n.limit};if(i!=="all"){const l={completed:"APPROVED",pending:"PENDING",failed:"DECLINED"};l[i]&&(t.status=l[i])}const s=await F(t);s.success?(v(s.payments||[]),d(l=>({...l,...s.pagination}))):console.error("Failed to load payments:",s.error)}catch(t){console.error("Error loading payments:",t)}finally{m(!1)}},E=t=>`$${t.toLocaleString()} COP`,P=t=>{navigator.clipboard.writeText(t)},D=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),I=t=>{if(!t)return"N/A";const s=t.split("-");if(s.length>=4){const l=s[0],S=s[1],L=s[2],g=s[3],A=new Date(`${S}-${L}-${g}T12:00:00`).toLocaleDateString("en-US",{month:"short"});return`${l} ${A} ${parseInt(g)}`}return t},u=t=>{switch(t.toUpperCase()){case"APPROVED":return"#3b64c6";case"COMPLETED":case"FREE":return"#00C292";case"DECLINED":case"FAILED":case"ERROR":return"#EF4444";case"PENDING":case"VERIFYING":return"#FB9678";default:return"#6B7280"}},x=[...r].sort((t,s)=>{switch(p){case"date":return new Date(s.createdAt)-new Date(t.createdAt);case"amount":return s.amount-t.amount;case"device":return t.deviceId.localeCompare(s.deviceId);default:return 0}}),k=r.reduce((t,s)=>{const l=s.status.toUpperCase();return l==="APPROVED"||l==="COMPLETED"?t+s.amount:t},0),$=r.filter(t=>{const s=t.status.toUpperCase();return s==="APPROVED"||s==="COMPLETED"}).length,R=r.filter(t=>{const s=t.status.toUpperCase();return s==="PENDING"||s==="VERIFYING"}).length,j=t=>{d(s=>({...s,page:t}))},o=t=>{b(t),d(s=>({...s,page:1}))};return e.jsxs("div",{className:"payments-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsxs("h1",{children:["ðŸ’³ ",a("payments.title")]}),e.jsx("p",{children:a("payments.subtitle")})]}),e.jsxs("button",{className:"btn-primary",onClick:h,children:["ðŸ”„ ",a("payments.refresh")]})]}),e.jsxs("div",{className:"payment-stats",children:[e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#03C9D7"},children:e.jsx(w,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.revenue")}),e.jsx("div",{className:"stat-number",children:k})]})]}),e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#00C292"},children:e.jsx(T,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.completed")}),e.jsx("div",{className:"stat-number",children:$})]})]}),e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#FB9678"},children:e.jsx(U,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.pending")}),e.jsx("div",{className:"stat-number",children:R})]})]}),e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#7460EE"},children:e.jsx(y,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.total")}),e.jsx("div",{className:"stat-number",children:n.total})]})]})]}),e.jsxs("div",{className:"payment-controls",children:[e.jsxs("div",{className:"payment-filters",children:[e.jsx("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>o("all"),children:a("payments.filters.all")}),e.jsx("button",{className:`filter-btn ${i==="completed"?"active":""}`,onClick:()=>o("completed"),children:a("payments.filters.completed")}),e.jsx("button",{className:`filter-btn ${i==="pending"?"active":""}`,onClick:()=>o("pending"),children:a("payments.filters.pending")}),e.jsx("button",{className:`filter-btn ${i==="failed"?"active":""}`,onClick:()=>o("failed"),children:a("payments.filters.failed")})]}),e.jsxs("select",{className:"sort-select",value:p,onChange:t=>C(t.target.value),children:[e.jsx("option",{value:"date",children:a("payments.sort.date")}),e.jsx("option",{value:"amount",children:a("payments.sort.amount")}),e.jsx("option",{value:"device",children:a("payments.sort.device")})]})]}),e.jsx("div",{className:"payments-table-container",children:f?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:a("payments.loading")})]}):x.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(y,{size:48}),e.jsx("h3",{children:a("payments.empty.title")}),e.jsx("p",{children:a("payments.empty.subtitle")})]}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"payments-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("payments.table.id")}),e.jsx("th",{children:a("payments.table.device")}),e.jsx("th",{children:a("payments.table.amount")}),e.jsx("th",{children:a("payments.table.status")}),e.jsx("th",{children:a("payments.table.reference")}),e.jsx("th",{children:a("payments.table.date")})]})}),e.jsx("tbody",{children:x.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"payment-id",title:"Click to copy full ID",onClick:()=>P(t.paymentId),style:{cursor:"pointer"},children:e.jsxs("code",{children:["...",t.paymentId.split("-").pop()]})}),e.jsx("td",{children:e.jsx("strong",{children:t.deviceId})}),e.jsx("td",{className:"amount",children:E(t.amount)}),e.jsx("td",{children:e.jsx("span",{className:"status-badge",style:{background:`${u(t.status)}20`,color:u(t.status)},children:t.status})}),e.jsx("td",{className:"payment-method",children:I(t.invoiceId||t.unpaidInvoiceId||t.paymentReference)}),e.jsx("td",{className:"date",children:D(t.createdAt)})]},t.paymentId))})]}),n.totalPages>1&&e.jsxs("div",{className:"pagination",children:[e.jsxs("button",{className:"pagination-btn",onClick:()=>j(n.page-1),disabled:!n.hasPrev,children:[e.jsx(z,{})," ",a("payments.pagination.previous")]}),e.jsx("span",{className:"pagination-info",children:a("payments.pagination.pageInfo",{page:n.page,totalPages:n.totalPages,total:n.total})}),e.jsxs("button",{className:"pagination-btn",onClick:()=>j(n.page+1),disabled:!n.hasNext,children:[a("payments.pagination.next")," ",e.jsx(G,{})]})]})]})})]})};export{X as default};
