import{r as i,p as T,j as e}from"./main-CfsT50y0.js";import{u as V}from"./useTranslation-Dr7ilz_7.js";import{D as G}from"./dollar-sign-BlM_MgUk.js";import{C as v}from"./check-C4eg8Me1.js";import{C as f}from"./clock-CW3OY5iD.js";import{C as m}from"./credit-card-Bnz6NQWv.js";import{c as b}from"./createLucideIcon-BVLfzT-S.js";import{X as U}from"./x-B5cEk_pk.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],B=b("chevron-left",z);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_=b("chevron-right",M),te=()=>{const{t:a}=V(),[l,C]=i.useState([]),[E,p]=i.useState(!0),[c,P]=i.useState("all"),[h,D]=i.useState("date"),[n,d]=i.useState({page:1,limit:20,total:0,totalPages:0,hasNext:!1,hasPrev:!1});i.useEffect(()=>{u()},[n.page,c]);const u=async()=>{p(!0);try{const t={page:n.page,limit:n.limit};if(c!=="all"){const r={completed:"APPROVED",pending:"PENDING",failed:"DECLINED"};r[c]&&(t.status=r[c])}const s=await T(t);s.success?(C(s.payments||[]),d(r=>({...r,...s.pagination}))):console.error("Failed to load payments:",s.error)}catch(t){console.error("Error loading payments:",t)}finally{p(!1)}},x=t=>`$${(t/100).toLocaleString()} COP`,I=t=>{navigator.clipboard.writeText(t)},k=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=t=>{if(!t)return"N/A";const s=t.split("-");if(s.length>=4){const r=s[0],A=s[1],F=s[2],y=s[3],w=new Date(`${A}-${F}-${y}T12:00:00`).toLocaleDateString("en-US",{month:"short"});return`${r} ${w} ${parseInt(y)}`}return t},L=t=>{switch(t.toUpperCase()){case"APPROVED":case"COMPLETED":return e.jsx(v,{});case"DECLINED":case"FAILED":case"ERROR":return e.jsx(U,{});case"PENDING":case"VERIFYING":return e.jsx(f,{});default:return e.jsx(m,{})}},j=t=>{switch(t.toUpperCase()){case"APPROVED":case"COMPLETED":return"#00C292";case"DECLINED":case"FAILED":case"ERROR":return"#EF4444";case"PENDING":case"VERIFYING":return"#FB9678";default:return"#6B7280"}},g=[...l].sort((t,s)=>{switch(h){case"date":return new Date(s.createdAt)-new Date(t.createdAt);case"amount":return s.amount-t.amount;case"device":return t.deviceId.localeCompare(s.deviceId);default:return 0}}),O=l.reduce((t,s)=>{const r=s.status.toUpperCase();return r==="APPROVED"||r==="COMPLETED"?t+s.amount:t},0),S=l.filter(t=>{const s=t.status.toUpperCase();return s==="APPROVED"||s==="COMPLETED"}).length,$=l.filter(t=>{const s=t.status.toUpperCase();return s==="PENDING"||s==="VERIFYING"}).length,N=t=>{d(s=>({...s,page:t}))},o=t=>{P(t),d(s=>({...s,page:1}))};return e.jsxs("div",{className:"payments-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsxs("h1",{children:["ðŸ’³ ",a("payments.title")]}),e.jsx("p",{children:a("payments.subtitle")})]}),e.jsxs("button",{className:"btn-primary",onClick:u,children:["ðŸ”„ ",a("payments.refresh")]})]}),e.jsxs("div",{className:"payment-stats",children:[e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#03C9D7"},children:e.jsx(G,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.revenue")}),e.jsx("div",{className:"stat-number",children:x(O)})]})]}),e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#00C292"},children:e.jsx(v,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.completed")}),e.jsx("div",{className:"stat-number",children:S})]})]}),e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#FB9678"},children:e.jsx(f,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.pending")}),e.jsx("div",{className:"stat-number",children:$})]})]}),e.jsxs("div",{className:"payment-stat-card",children:[e.jsx("div",{className:"stat-icon",style:{background:"#7460EE"},children:e.jsx(m,{size:20})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-label",children:a("payments.stats.total")}),e.jsx("div",{className:"stat-number",children:n.total})]})]})]}),e.jsxs("div",{className:"payment-controls",children:[e.jsxs("div",{className:"payment-filters",children:[e.jsx("button",{className:`filter-btn ${c==="all"?"active":""}`,onClick:()=>o("all"),children:a("payments.filters.all")}),e.jsx("button",{className:`filter-btn ${c==="completed"?"active":""}`,onClick:()=>o("completed"),children:a("payments.filters.completed")}),e.jsx("button",{className:`filter-btn ${c==="pending"?"active":""}`,onClick:()=>o("pending"),children:a("payments.filters.pending")}),e.jsx("button",{className:`filter-btn ${c==="failed"?"active":""}`,onClick:()=>o("failed"),children:a("payments.filters.failed")})]}),e.jsxs("select",{className:"sort-select",value:h,onChange:t=>D(t.target.value),children:[e.jsx("option",{value:"date",children:a("payments.sort.date")}),e.jsx("option",{value:"amount",children:a("payments.sort.amount")}),e.jsx("option",{value:"device",children:a("payments.sort.device")})]})]}),e.jsx("div",{className:"payments-table-container",children:E?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:a("payments.loading")})]}):g.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(m,{size:48}),e.jsx("h3",{children:a("payments.empty.title")}),e.jsx("p",{children:a("payments.empty.subtitle")})]}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"payments-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("payments.table.id")}),e.jsx("th",{children:a("payments.table.device")}),e.jsx("th",{children:a("payments.table.amount")}),e.jsx("th",{children:a("payments.table.status")}),e.jsx("th",{children:a("payments.table.reference")}),e.jsx("th",{children:a("payments.table.date")})]})}),e.jsx("tbody",{children:g.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"payment-id",title:"Click to copy full ID",onClick:()=>I(t.paymentId),style:{cursor:"pointer"},children:e.jsxs("code",{children:["...",t.paymentId.split("-").pop()]})}),e.jsx("td",{children:e.jsx("strong",{children:t.deviceId})}),e.jsx("td",{className:"amount",children:x(t.amount)}),e.jsx("td",{children:e.jsxs("span",{className:"status-badge",style:{background:`${j(t.status)}20`,color:j(t.status)},children:[L(t.status),t.status]})}),e.jsx("td",{className:"payment-method",children:R(t.invoiceId||t.unpaidInvoiceId||t.paymentReference)}),e.jsx("td",{className:"date",children:k(t.createdAt)})]},t.paymentId))})]}),n.totalPages>1&&e.jsxs("div",{className:"pagination",children:[e.jsxs("button",{className:"pagination-btn",onClick:()=>N(n.page-1),disabled:!n.hasPrev,children:[e.jsx(B,{})," ",a("payments.pagination.previous")]}),e.jsx("span",{className:"pagination-info",children:a("payments.pagination.pageInfo",{page:n.page,totalPages:n.totalPages,total:n.total})}),e.jsxs("button",{className:"pagination-btn",onClick:()=>N(n.page+1),disabled:!n.hasNext,children:[a("payments.pagination.next")," ",e.jsx(_,{})]})]})]})})]})};export{te as default};
