import{u as g,r as t,g as p,j as e}from"./main-CLN5GBsR.js";import{u as y}from"./useTranslation-CJEXlQpI.js";import{D as f}from"./dollar-sign-CRMCiP11.js";import{F as N}from"./file-text-BNWoEXMf.js";import{C as D}from"./credit-card-ry7Avp95.js";import{T as P}from"./trending-up-BW6nx1mP.js";import{c as C}from"./createLucideIcon-DbnyYsP5.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],w=C("trending-down",S),_=()=>{const{user:R}=g(),{t:a}=y(),[r,i]=t.useState({totalRevenue:0,activeContracts:0,pendingPayments:0,totalDevices:0}),[A,l]=t.useState([]),[L,h]=t.useState([]),[c,m]=t.useState([]),[x,o]=t.useState(!0);t.useEffect(()=>{j()},[]);const j=async()=>{o(!0);try{const s=await p();s.success?(i(s.data.stats),l(s.data.revenueData),h(s.data.deviceData),m(s.data.recentPayments)):console.error("Failed to fetch dashboard data:",s.error)}catch(s){console.error("Error fetching dashboard data:",s)}finally{o(!1)}},d=({title:s,value:u,change:n,icon:v,color:b})=>e.jsxs("div",{className:"stat-card",children:[n!==void 0&&n!==0&&e.jsxs("div",{className:`stat-change-corner ${n>0?"positive":"negative"}`,children:[n>0?e.jsx(P,{size:14}):e.jsx(w,{size:14}),Math.abs(n),"%"]}),e.jsx("div",{className:"stat-icon",style:{background:b},children:e.jsx(v,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s}),e.jsx("div",{className:"stat-value",children:u})]})]});return x?e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:a("dashboard.loading")})]})}):e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("div",{children:e.jsx("h1",{children:a("dashboard.title")})}),e.jsxs("button",{className:"btn-download",children:["ðŸ“Š ",a("dashboard.downloadReport")]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx(d,{title:a("dashboard.stats.totalRevenue"),value:`$${r.totalRevenue.toLocaleString()}`,change:12.5,icon:f,color:"#03C9D7"}),e.jsx(d,{title:a("dashboard.stats.activeContracts"),value:r.activeContracts,change:5.2,icon:N,color:"#FB9678"}),e.jsx(d,{title:a("dashboard.stats.pendingPayments"),value:r.pendingPayments,change:-2.1,icon:D,color:"#00C292"})]}),e.jsxs("div",{className:"table-card",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("h3",{children:a("dashboard.recentPayments.title")}),e.jsxs("a",{href:"#/payments",className:"view-all",children:[a("dashboard.recentPayments.viewAll")," â†’"]})]}),e.jsxs("table",{className:"payments-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("dashboard.recentPayments.table.device")}),e.jsx("th",{children:a("dashboard.recentPayments.table.amount")}),e.jsx("th",{children:a("dashboard.recentPayments.table.status")}),e.jsx("th",{children:a("dashboard.recentPayments.table.date")})]})}),e.jsx("tbody",{children:c.length>0?c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:s.device})}),e.jsxs("td",{children:["$",(s.amount/100).toLocaleString()," COP"]}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${(s.status||"unknown").toLowerCase()}`,children:s.status||"Unknown"})}),e.jsx("td",{children:s.date})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem",color:"#9CA3AF"},children:a("dashboard.recentPayments.noPayments")})})})]})]})]})};export{_ as default};
