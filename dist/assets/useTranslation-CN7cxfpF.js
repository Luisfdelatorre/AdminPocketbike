import{r as l,n as q,o as X}from"./index-DYjkxkRa.js";import{r as Y}from"./index-5MHfkS4G.js";const $=(e,n,a,u)=>{var t,d,m,g;const i=[a,{code:n,...u||{}}];if((d=(t=e==null?void 0:e.services)==null?void 0:t.logger)!=null&&d.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);p(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(g=(m=e==null?void 0:e.services)==null?void 0:m.logger)!=null&&g.warn?e.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},j={},z=(e,n,a,u)=>{p(a)&&j[a]||(p(a)&&(j[a]=new Date),$(e,n,a,u))},A=(e,n)=>()=>{if(e.isInitialized)n();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),n()};e.on("initialized",a)}},O=(e,n,a)=>{e.loadNamespaces(n,A(e,a))},k=(e,n,a,u)=>{if(p(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(n)>-1)return O(e,a,u);a.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(n,A(e,u))},B=(e,n,a={})=>!n.languages||!n.languages.length?(z(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(e,{lng:a.lng,precheck:(u,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&u.services.backendConnector.backend&&u.isLanguageChangingTo&&!i(u.isLanguageChangingTo,e))return!1}}),p=e=>typeof e=="string",H=e=>typeof e=="object"&&e!==null,J=l.createContext();class K{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Q=Y();const Z=(e,n)=>p(n)?n:H(n)&&p(n.defaultValue)?n.defaultValue:Array.isArray(e)?e[e.length-1]:e,D={t:Z,ready:!1},V=()=>()=>{},ne=(e,n={})=>{var I,N,T;const{i18n:a}=n,{i18n:u,defaultNS:i}=l.useContext(J)||{},t=a||u||q();t&&!t.reportNamespaces&&(t.reportNamespaces=new K),t||z(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const d=l.useMemo(()=>{var s;return{...X(),...(s=t==null?void 0:t.options)==null?void 0:s.react,...n}},[t,n]),{useSuspense:m,keyPrefix:g}=d,x=i||((I=t==null?void 0:t.options)==null?void 0:I.defaultNS),R=p(x)?[x]:x||["translation"],f=l.useMemo(()=>R,R);(T=(N=t==null?void 0:t.reportNamespaces)==null?void 0:N.addUsedNamespaces)==null||T.call(N,f);const _=l.useRef(0),F=l.useCallback(s=>{if(!t)return V;const{bindI18n:r,bindI18nStore:o}=d,c=()=>{_.current+=1,s()};return r&&t.on(r,c),o&&t.store.on(o,c),()=>{r&&r.split(" ").forEach(w=>t.off(w,c)),o&&o.split(" ").forEach(w=>t.store.off(w,c))}},[t,d]),v=l.useRef(),L=l.useCallback(()=>{if(!t)return D;const s=!!(t.isInitialized||t.initializedStoreOnce)&&f.every(G=>B(G,t,d)),r=n.lng||t.language,o=_.current,c=v.current;if(c&&c.ready===s&&c.lng===r&&c.keyPrefix===g&&c.revision===o)return c;const P={t:t.getFixedT(r,d.nsMode==="fallback"?f:f[0],g),ready:s,lng:r,keyPrefix:g,revision:o};return v.current=P,P},[t,f,g,d,n.lng]),[M,U]=l.useState(0),{t:S,ready:h}=Q.useSyncExternalStore(F,L,L);l.useEffect(()=>{if(t&&!h&&!m){const s=()=>U(r=>r+1);n.lng?k(t,n.lng,f,s):O(t,f,s)}},[t,n.lng,f,h,m,M]);const y=t||{},b=l.useRef(null),C=l.useRef(),E=s=>{const r=Object.getOwnPropertyDescriptors(s);r.__original&&delete r.__original;const o=Object.create(Object.getPrototypeOf(s),r);if(!Object.prototype.hasOwnProperty.call(o,"__original"))try{Object.defineProperty(o,"__original",{value:s,writable:!1,enumerable:!1,configurable:!1})}catch{}return o},W=l.useMemo(()=>{const s=y,r=s==null?void 0:s.language;let o=s;s&&(b.current&&b.current.__original===s?C.current!==r?(o=E(s),b.current=o,C.current=r):o=b.current:(o=E(s),b.current=o,C.current=r));const c=[S,o,h];return c.t=S,c.i18n=o,c.ready=h,c},[S,y,h,y.resolvedLanguage,y.language,y.languages]);if(t&&m&&!h)throw new Promise(s=>{const r=()=>s();n.lng?k(t,n.lng,f,r):O(t,f,r)});return W};export{ne as u};
