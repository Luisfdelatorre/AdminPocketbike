import{r as c,q as S,t as L,j as s}from"./main-CfsT50y0.js";import{u as A}from"./useTranslation-Dr7ilz_7.js";import{F as N}from"./file-text-CiGaxbES.js";import{C as E}from"./check-C4eg8Me1.js";import{X as p}from"./x-B5cEk_pk.js";import{D as k}from"./dollar-sign-BlM_MgUk.js";import{S as w}from"./search-CPdBVXh6.js";import{c as D}from"./createLucideIcon-BVLfzT-S.js";import{C as F}from"./calendar-DuQf0i4u.js";import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],T=D("funnel",P),M=()=>{const{t:a}=A(),[m,f]=c.useState([]),[g,h]=c.useState(!0),[t,n]=c.useState("all"),[i,v]=c.useState(""),[l,y]=c.useState({total:0,paid:0,unpaid:0,totalAmount:0});c.useEffect(()=>{C(),b()},[]);const b=async()=>{try{const e=await S();e.success&&y(e.stats)}catch(e){console.error("Error loading stats:",e)}},C=async()=>{h(!0);try{const e=await L({page:1,limit:50});e.success?f(e.invoices||[]):console.error("Error loading invoices:",e.error)}catch(e){console.error("Error loading invoices:",e)}finally{h(!1)}},x=e=>`$${e.toLocaleString()} COP`,I=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=e=>({PAID:"#00C292",UNPAID:"#EF4444",PENDING:"#FB9678",CANCELLED:"#6B7280"})[e]||"#6B7280",d=m.filter(e=>{var r,j;if(t!=="all"&&e.dayType.toLowerCase()!==t.toLowerCase())return!1;if(i){const o=i.toLowerCase();return e.invoiceId.toLowerCase().includes(o)||e.deviceId.toLowerCase().includes(o)||((r=e.contractId)==null?void 0:r.toLowerCase().includes(o))||((j=e.paymentReference)==null?void 0:j.toLowerCase().includes(o))}return!0});return s.jsxs("div",{className:"invoices-page",children:[s.jsx("div",{className:"page-header",children:s.jsxs("div",{children:[s.jsx("h1",{children:a("invoices.title")}),s.jsx("p",{children:a("invoices.subtitle")})]})}),s.jsxs("div",{className:"invoices-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#03C9D7"},children:s.jsx(N,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total"}),s.jsx("div",{className:"stat-number",children:l.total})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#00C292"},children:s.jsx(E,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:a("invoices.filterPaid")}),s.jsx("div",{className:"stat-number",children:l.paid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#EF4444"},children:s.jsx(p,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:a("invoices.filterUnpaid")}),s.jsx("div",{className:"stat-number",children:l.unpaid})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon",style:{background:"#7460EE"},children:s.jsx(k,{})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-label",children:"Total Amount"}),s.jsx("div",{className:"stat-number",children:x(l.totalAmount)})]})]})]}),s.jsx("div",{className:"invoices-search",children:s.jsxs("div",{className:"search-box",children:[s.jsx(w,{className:"search-icon"}),s.jsx("input",{type:"text",placeholder:a("invoices.searchPlaceholder"),value:i,onChange:e=>v(e.target.value)}),i&&s.jsx("button",{className:"clear-search",onClick:()=>v(""),children:s.jsx(p,{})})]})}),s.jsxs("div",{className:"invoices-filters",children:[s.jsxs("button",{className:`filter-btn ${t==="all"?"active":""}`,onClick:()=>n("all"),children:[s.jsx(T,{})," ",a("invoices.filterAll")]}),s.jsx("button",{className:`filter-btn ${t==="paid"?"active":""}`,onClick:()=>n("paid"),children:a("invoices.filterPaid")}),s.jsx("button",{className:`filter-btn ${t==="unpaid"?"active":""}`,onClick:()=>n("unpaid"),children:a("invoices.filterUnpaid")}),s.jsx("button",{className:`filter-btn ${t==="pending"?"active":""}`,onClick:()=>n("pending"),children:a("invoices.filterPending")})]}),g?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:a("common.loading")})]}):d.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(N,{size:48}),s.jsx("h3",{children:a("invoices.empty")}),s.jsx("p",{children:i?`"${i}"`:a("invoices.empty")})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"invoices-table",children:[s.jsxs("div",{className:"table-header",children:[s.jsx("div",{children:"ID Factura"}),s.jsx("div",{children:a("login.deviceId")}),s.jsx("div",{children:"Date"}),s.jsx("div",{children:"Amount"}),s.jsx("div",{children:a("common.status")})]}),d.map(e=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"invoice-id",children:e.invoiceId}),s.jsx("div",{className:"device-id",children:e.deviceIdName}),s.jsxs("div",{className:"invoice-date",children:[s.jsx(F,{size:14}),I(e.date)]}),s.jsx("div",{className:"invoice-amount",children:x(e.paidAmount)}),s.jsx("div",{className:"invoice-status",children:s.jsx("span",{className:"status-badge",style:{background:`${u(e.dayType)}20`,color:u(e.dayType)},children:e.dayType})})]},e.invoiceId))]}),s.jsxs("div",{className:"results-info",children:["Showing ",d.length," of ",m.length," invoices"]})]})]})};export{M as default};
